<html>	<head>		<title>添加用户</title>	<style>			table{border-color:teal;font-family:隶书;font-weight:1px; font-size:15px;color:teal;}		.one,.two{ border-style:none;background:teal;border-radius:12px 12px 12px 12px;}	</style>	</head>	<body >		<center>				<form action="index.php" method="get">       商品名称: <input type="text" style="height:20px; width:100px"   name="goods" value="<?php echo $_GET['goods'] ?>"/>	   单价: <input type="text" name="price1"style="height:20px; width:60px" value="<?php echo $_GET['price1'];  ?>" />-- 	   <input type="text" name="price2"style="height:20px; width:60px"  value="<?php echo $_GET['price2']; ?>" />	   <input type="submit" value="搜索"/>	   <input type="button" value="全部信息" onclick="window.location='index.php'"/>	  </form>						<h2><font face='隶书' color='gray'>商品信息浏览</font></h2>					<table width="1000" border="1">				<input type='hidden' name='state' value='1'>								<tr>					<th align='center'>ID</th>					<th align='center'>商品类别</th>								<th align='center'>商品名称</th>									<th align='center'>商品厂家</th>					<th align='center'>单价</th>					<th align='center'>图片名</th>					<th align='center'>状态</th>					<th align='center'>库存量</th>						<th align='center'>被购买数量</th>						<th align='center'>添加时间</th>						<th align='center'>操作</th>	 				</tr>		<?php		//封装搜索条件--------------------		$where="";		$wherelist=array();//定义一个存放搜索条件的容器		$url="";//声明一个搜索条件的url字串		$urllist=array();//定义一个存放url的数值的值		//判断商品名称		if(!empty($_GET['goods'])){		 $wherelist[]="goods like '%{$_GET['goods']}%' ";		  $urlist[]="goods={$_GET['goods']}";	       }		 //判断价格     if(!empty($_GET['price1'])){	    $wherelist[]="price>={$_GET['price1']}";		$urlist[]="price1={$_GET['price1']}";	   }     if(!empty($_GET['price2'])){	    $wherelist[]="price<={$_GET['price2']}";		$urlist[]="price2={$_GET['price2']}";	   }		 	if(count($wherelist)>0){	$where1=" and ".implode(" and ",$wherelist);	$where2=" where ".implode(" and ",$wherelist);	$url="&".implode("&",$urlist);		}		   	//------------------------------------------------------------			$state=array(1=>"<font color='blue'><b>新添加</b></font>",2=>"<font color='red'><b>在售</b></font>",3=>"<font color='green'><b>已下架</b></font>");      //1.导入配置文件	   require("../../public/dbconfig.php");		//2执行数据库连接,并判断	   $link=@mysql_connect(HOST,USER,PASS) or die("数据库连接失败".mysql_error());	   //3设置字符编码,选择数据库	   mysql_set_charset('utf8');	   mysql_select_db(DBNAME,$link);	   //--------------------封装分页条件	     $page=isset($_GET['page'])?$_GET['page']:1;	     $pagesize=5;	     $maxrows=0;  //最大数据条数	     $maxpages=0;//最大页数	    //获取最大数据条数		$sql="select count(*) from goods {$where2}";		$result=mysql_query($sql,$link);		$maxrows=@mysql_result($result,0,0);		$maxpages=ceil($maxrows/$pagesize);		//判断是否越界		if($page>$maxpages){		   $page=$maxpages;		  }		if($page<1){		$page=1;		 }		//拼装sql的limit语句         $limit=" limit ".(($page-1)*$pagesize).",{$pagesize}";	     //----------------------------结束分页条件	   //准备sql语句,并发送zhix			$sql="select goods.*,type.name from goods,type where 		goods.typeid=type.id {$where1}{$limit} ";		$result=mysql_query($sql,$link);	//5.解析结果集	$state=array(1=>'新添加',2=>'在售',3=>'下线');					while($row=mysql_fetch_assoc($result)){						echo "<tr>";						echo "<td>{$row['id']}</td>";						echo "<td>{$row['name']}</td>";						echo "<td>{$row['goods']}</td>";						echo "<td>{$row['company']}</td>";						echo "<td>{$row['price']}</td>";						echo "<td><img src='./image/s_{$row['picname']}'></td>";						echo "<td>{$state[$row['state']]}</td>";						echo "<td>{$row['store']}</td>";						echo "<td>{$row['num']}</td>";						echo "<td>".date("Y-m-d H:s:i",$row['addtime'])."</td>";						echo "<td>								<a href='edit.php?k={$row['id']}'>修改</a>								<a href='action.php?action=dodel&k={$row['id']}'>删除</a>							</td>";						echo "</tr>";						}						    //6.释放结果就,关闭所数据库连接	mysql_free_result($result);	mysql_close($link);?><tr> <td colspan='11' align="center">	<?php					echo "当前{$page}/{$maxpages}页 共计{$maxrows}件商品";					echo "&nbsp;&nbsp;&nbsp;";				   	echo " <a href='index.php?page=1{$url}'>首页</a> ";					echo "&nbsp;&nbsp;&nbsp;";					echo " <a href='index.php?page=".($page-1)."{$url}'>上一页</a> ";					echo "&nbsp;&nbsp;&nbsp;";					echo " <a href='index.php?page=".($page+1)."{$url}'>下一页</a> ";					echo "&nbsp;&nbsp;&nbsp;";					echo " <a href='index.php?page={$maxpages}{$url}'>末页</a> ";	?></td></tr></table>	</center></body></html>